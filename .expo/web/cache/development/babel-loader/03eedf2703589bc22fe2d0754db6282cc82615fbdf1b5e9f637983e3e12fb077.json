{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { globalStyles } from \"../Style/globalFont\";\nimport { Ionicons } from '@expo/vector-icons';\nimport { EditProfilePicture } from \"./EditProfilePicture\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function ProfileScreen(_ref) {\n  var route = _ref.route,\n    navigation = _ref.navigation;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    profile = _useState2[0],\n    setProfile = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    articles = _useState4[0],\n    setArticles = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    trades = _useState6[0],\n    setTrades = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    isEditing = _useState8[0],\n    setIsEditing = _useState8[1];\n  var _useState9 = useState(true),\n    _useState10 = _slicedToArray(_useState9, 2),\n    isLoading = _useState10[0],\n    setIsLoading = _useState10[1];\n  useEffect(function () {\n    var fetchProfileData = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          var token = yield AsyncStorage.getItem('userToken');\n          if (token) {\n            var response = yield axios.get('http://localhost:5001/api/users/profile', {\n              headers: {\n                Authorization: `Bearer ${token}`\n              }\n            });\n            setProfile(response.data);\n          }\n        } catch (error) {\n          console.error('Erreur lors de la récupération des données :', error);\n        } finally {\n          setIsLoading(false);\n        }\n      });\n      return function fetchProfileData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    fetchProfileData();\n  }, []);\n  var styles = StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: '#A0AE88'\n    },\n    header: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      paddingHorizontal: 20,\n      paddingTop: 50,\n      paddingBottom: 20,\n      borderBottomWidth: 1,\n      borderBottomColor: '#ccc'\n    },\n    title: {\n      fontFamily: 'Rowdies',\n      fontSize: 24,\n      fontWeight: 'bold',\n      color: 'white'\n    },\n    icons: {\n      flexDirection: 'row'\n    },\n    scrollContent: {\n      flexGrow: 1,\n      alignItems: 'center',\n      paddingBottom: 80\n    },\n    profileInfo: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundColor: '#fff',\n      padding: 20,\n      borderRadius: 10,\n      marginBottom: 20,\n      width: '90%'\n    },\n    profilePic: {\n      width: 80,\n      height: 80,\n      borderRadius: 40,\n      marginRight: 20\n    },\n    profileDetails: {\n      flex: 1\n    },\n    name: {\n      fontFamily: 'Rowdies',\n      fontSize: 18,\n      fontWeight: 'bold'\n    },\n    city: {\n      fontFamily: 'Rowdies',\n      fontSize: 16\n    },\n    stats: {\n      flexDirection: 'row',\n      justifyContent: 'space-around',\n      marginTop: 10\n    },\n    statItem: {\n      alignItems: 'center'\n    },\n    statNumber: {\n      fontFamily: 'Rowdies',\n      fontSize: 16,\n      fontWeight: 'bold'\n    },\n    statLabel: {\n      fontFamily: 'Rowdies',\n      fontSize: 14\n    },\n    articlesGrid: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      justifyContent: 'space-between',\n      width: '90%'\n    },\n    articleCard: {\n      backgroundColor: '#C9AC96',\n      width: '31%',\n      aspectRatio: 1,\n      margin: 5,\n      borderRadius: 10\n    },\n    bottomNavBar: {\n      flexDirection: 'row',\n      justifyContent: 'space-around',\n      alignItems: 'center',\n      backgroundColor: '#D9D9D9',\n      width: '100%',\n      padding: 15,\n      position: 'absolute',\n      bottom: 0\n    }\n  });\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsxs(ScrollView, {\n      contentContainerStyle: styles.scrollContent,\n      children: [_jsxs(View, {\n        style: styles.profileInfo,\n        children: [profile.profileImage ? _jsx(Image, {\n          source: {\n            uri: profile.profileImage\n          },\n          style: styles.profilePic\n        }) : _jsx(Image, {\n          source: require(\"../assets/profile-pic.jpg\"),\n          style: styles.profilePic\n        }), _jsxs(View, {\n          style: styles.profileDetails,\n          children: [_jsx(Text, {\n            style: styles.name,\n            children: profile.name\n          }), _jsx(Text, {\n            style: styles.city,\n            children: profile.city\n          }), _jsx(Text, {\n            style: styles.email,\n            children: profile.email\n          })]\n        })]\n      }), \")}\", articles && _jsx(View, {\n        style: styles.articlesGrid,\n        children: articles.map(function (article, index) {\n          return _jsx(ArticlePreview, {\n            article: article\n          }, index);\n        })\n      }), trades && _jsx(PastTrades, {\n        trades: trades\n      })]\n    })\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","View","Text","Image","Pressable","StyleSheet","ScrollView","TouchableOpacity","Alert","ActivityIndicator","axios","AsyncStorage","globalStyles","Ionicons","EditProfilePicture","jsx","_jsx","jsxs","_jsxs","ProfileScreen","_ref","route","navigation","_useState","_useState2","_slicedToArray","profile","setProfile","_useState3","_useState4","articles","setArticles","_useState5","_useState6","trades","setTrades","_useState7","_useState8","isEditing","setIsEditing","_useState9","_useState10","isLoading","setIsLoading","fetchProfileData","_ref2","_asyncToGenerator","token","getItem","response","get","headers","Authorization","data","error","console","apply","arguments","styles","create","container","flex","backgroundColor","header","flexDirection","justifyContent","alignItems","paddingHorizontal","paddingTop","paddingBottom","borderBottomWidth","borderBottomColor","title","fontFamily","fontSize","fontWeight","color","icons","scrollContent","flexGrow","profileInfo","padding","borderRadius","marginBottom","width","profilePic","height","marginRight","profileDetails","name","city","stats","marginTop","statItem","statNumber","statLabel","articlesGrid","flexWrap","articleCard","aspectRatio","margin","bottomNavBar","position","bottom","style","children","contentContainerStyle","profileImage","source","uri","require","email","map","article","index","ArticlePreview","PastTrades"],"sources":["/Users/matveitabelev/Desktop/TROQUANTE/MonProjet/components/ProfileScreen.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { View, Text, Image, Pressable, StyleSheet, ScrollView, TouchableOpacity, Alert, ActivityIndicator } from 'react-native'; // Import ActivityIndicator\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { globalStyles } from '../Style/globalFont';\nimport { Ionicons } from '@expo/vector-icons'; \nimport { EditProfilePicture } from './EditProfilePicture';\n\nexport function ProfileScreen({ route, navigation }) {\n  const [profile, setProfile] = useState(null);\n  const [articles, setArticles] = useState([]);\n  const [trades, setTrades] = useState([]);\n  const [isEditing, setIsEditing] = useState(false);\n  const [isLoading, setIsLoading] = useState(true); // Nouvel état pour le chargement\n\n  useEffect(() => {\n    const fetchProfileData = async () => {\n      try {\n        const token = await AsyncStorage.getItem('userToken');\n        if (token) {\n          const response = await axios.get('http://localhost:5001/api/users/profile', {\n            headers: { Authorization: `Bearer ${token}` },\n          });\n          setProfile(response.data);\n\n          // ... (récupération des articles et trocs, comme avant)\n        }\n      } catch (error) {\n        console.error('Erreur lors de la récupération des données :', error);\n        // Gérez l'erreur ici, par exemple en affichant un message à l'utilisateur\n      } finally {\n        setIsLoading(false); // Fin du chargement, que la requête réussisse ou échoue\n      }\n    };\n\n    fetchProfileData();\n  }, []);\n\n  // ... (vos fonctions handleEditProfile, handleDeleteProfile)\n  const styles = StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: '#A0AE88', // Couleur de fond principale\n    },\n    header: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      paddingHorizontal: 20,\n      paddingTop: 50, // Marge supérieure plus importante\n      paddingBottom: 20,\n      borderBottomWidth: 1, // Ligne de séparation\n      borderBottomColor: '#ccc', // Couleur de la ligne de séparation\n    },\n    title: {\n      fontFamily: 'Rowdies',\n      fontSize: 24,\n      fontWeight: 'bold',\n      color: 'white',\n    },\n    icons: {\n      flexDirection: 'row',\n    },\n    scrollContent: {\n      flexGrow: 1, // Permet au contenu de remplir l'espace disponible\n      alignItems: 'center',\n      paddingBottom: 80, // Espace pour la barre de navigation inférieure\n    },\n    profileInfo: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundColor: '#fff',\n      padding: 20,\n      borderRadius: 10,\n      marginBottom: 20,\n      width: '90%', // Largeur du conteneur d'informations du profil\n    },\n    profilePic: {\n      width: 80,\n      height: 80,\n      borderRadius: 40,\n      marginRight: 20,\n    },\n    profileDetails: {\n      flex: 1, // Permet aux détails de prendre l'espace restant\n    },\n    name: {\n      fontFamily: 'Rowdies',\n      fontSize: 18,\n      fontWeight: 'bold',\n    },\n    city: {\n      fontFamily: 'Rowdies',\n      fontSize: 16,\n    },\n    stats: {\n      flexDirection: 'row',\n      justifyContent: 'space-around',\n      marginTop: 10,\n    },\n    statItem: {\n      alignItems: 'center',\n    },\n    statNumber: {\n      fontFamily: 'Rowdies',\n      fontSize: 16,\n      fontWeight: 'bold',\n    },\n    statLabel: {\n      fontFamily: 'Rowdies',\n      fontSize: 14,\n    },\n    articlesGrid: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      justifyContent: 'space-between',\n      width: '90%', // Largeur de la grille d'articles\n    },\n    articleCard: {\n      backgroundColor: '#C9AC96', \n      width: '31%', // Largeur d'une carte (3 colonnes avec une petite marge)\n      aspectRatio: 1, // Maintient le ratio 1:1 (carré)\n      margin: 5,\n      borderRadius: 10,\n    },\n    bottomNavBar: {\n      flexDirection: 'row',\n      justifyContent: 'space-around',\n      alignItems: 'center',\n      backgroundColor: '#D9D9D9',\n      width: '100%',\n      padding: 15,\n      position: 'absolute',\n      bottom: 0,\n    },\n  });\n  return (\n    <View style={styles.container}>\n  \n      <ScrollView contentContainerStyle={styles.scrollContent}>\n        {/* Informations du profil */}\n        <View style={styles.profileInfo}>\n            {profile.profileImage ? ( \n              <Image source={{ uri: profile.profileImage }} style={styles.profilePic} />\n            ) : (\n              <Image source={require('../assets/profile-pic.jpg')} style={styles.profilePic} />\n            )} \n            <View style={styles.profileDetails}>\n              <Text style={styles.name}>{profile.name}</Text>\n              <Text style={styles.city}>{profile.city}</Text>\n              <Text style={styles.email}>{profile.email}</Text>\n            </View>\n          </View>\n        )}\n         \n\n        {/* Articles */}\n        {articles && ( // Affichage conditionnel des articles\n        <View style={styles.articlesGrid}>\n          {articles.map((article, index) => (\n            <ArticlePreview key={index} article={article} />\n          ))}\n        </View>\n        )}\n\n        {/* Trocs passés */}\n        {trades && ( // Affichage conditionnel des trocs\n          <PastTrades trades={trades} />\n        )}\n      </ScrollView>\n\n     \n    </View>\n  );\n  \n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}