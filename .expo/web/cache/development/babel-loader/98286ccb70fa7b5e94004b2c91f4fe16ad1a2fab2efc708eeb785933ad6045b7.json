{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { globalStyles } from \"../Style/globalFont\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function ProfileScreen(_ref) {\n  var route = _ref.route,\n    navigation = _ref.navigation;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    profile = _useState2[0],\n    setProfile = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    articles = _useState4[0],\n    setArticles = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    trades = _useState6[0],\n    setTrades = _useState6[1];\n  var _useState7 = useState(true),\n    _useState8 = _slicedToArray(_useState7, 2),\n    isLoading = _useState8[0],\n    setIsLoading = _useState8[1];\n  useEffect(function () {\n    var fetchProfileData = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          var token = yield AsyncStorage.getItem('userToken');\n          if (token) {\n            console.log('Token found:', token);\n            var response = yield axios.get('http://localhost:5001/api/users/profile', {\n              headers: {\n                Authorization: `Bearer ${token}`\n              }\n            });\n            console.log('Profile data:', response.data);\n            setProfile(response.data);\n          } else {\n            console.log('No token found');\n          }\n        } catch (error) {\n          console.error('Erreur lors de la récupération des données :', error);\n        } finally {\n          setIsLoading(false);\n        }\n      });\n      return function fetchProfileData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    fetchProfileData();\n  }, []);\n  var styles = StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: '#A0AE88'\n    },\n    loading: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    scrollContent: {\n      flexGrow: 1,\n      alignItems: 'center',\n      paddingBottom: 80\n    },\n    profileInfo: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundColor: '#fff',\n      padding: 20,\n      borderRadius: 10,\n      marginBottom: 20,\n      width: '90%'\n    },\n    profilePic: {\n      width: 80,\n      height: 80,\n      borderRadius: 40,\n      marginRight: 20\n    },\n    profileDetails: {\n      flex: 1\n    },\n    name: {\n      fontFamily: 'Rowdies',\n      fontSize: 18,\n      fontWeight: 'bold'\n    },\n    city: {\n      fontFamily: 'Rowdies',\n      fontSize: 16\n    },\n    articlesGrid: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      justifyContent: 'space-between',\n      width: '90%'\n    },\n    articleCard: {\n      backgroundColor: '#C9AC96',\n      width: '31%',\n      aspectRatio: 1,\n      margin: 5,\n      borderRadius: 10,\n      alignItems: 'center',\n      justifyContent: 'center'\n    }\n  });\n  if (isLoading) {\n    return _jsx(View, {\n      style: styles.loading,\n      children: _jsx(ActivityIndicator, {\n        size: \"large\",\n        color: \"#6E745C\"\n      })\n    });\n  }\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsxs(ScrollView, {\n      contentContainerStyle: styles.scrollContent,\n      children: [profile ? _jsxs(View, {\n        style: styles.profileInfo,\n        children: [profile.profileImage ? _jsx(Image, {\n          source: {\n            uri: profile.profileImage\n          },\n          style: styles.profilePic\n        }) : _jsx(Image, {\n          source: require(\"../assets/profile-pic.jpg\"),\n          style: styles.profilePic\n        }), _jsxs(View, {\n          style: styles.profileDetails,\n          children: [_jsx(Text, {\n            style: styles.name,\n            children: profile.name\n          }), _jsx(Text, {\n            style: styles.city,\n            children: profile.city\n          }), _jsx(Text, {\n            style: styles.email,\n            children: profile.email\n          })]\n        })]\n      }) : _jsx(Text, {\n        children: \"Profil non disponible\"\n      }), articles.length > 0 ? _jsx(View, {\n        style: styles.articlesGrid,\n        children: articles.map(function (article, index) {\n          return _jsx(View, {\n            style: styles.articleCard,\n            children: _jsx(Text, {\n              children: article.title\n            })\n          }, index);\n        })\n      }) : _jsx(Text, {\n        children: \"Aucun article disponible\"\n      }), trades.length > 0 ? _jsxs(View, {\n        children: [_jsx(Text, {\n          children: \"Trocs pass\\xE9s:\"\n        }), trades.map(function (trade, index) {\n          return _jsx(View, {\n            children: _jsx(Text, {\n              children: trade.details\n            })\n          }, index);\n        })]\n      }) : _jsx(Text, {\n        children: \"Aucun troc pass\\xE9 disponible\"\n      })]\n    })\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","View","Text","Image","StyleSheet","ScrollView","ActivityIndicator","axios","AsyncStorage","globalStyles","jsx","_jsx","jsxs","_jsxs","ProfileScreen","_ref","route","navigation","_useState","_useState2","_slicedToArray","profile","setProfile","_useState3","_useState4","articles","setArticles","_useState5","_useState6","trades","setTrades","_useState7","_useState8","isLoading","setIsLoading","fetchProfileData","_ref2","_asyncToGenerator","token","getItem","console","log","response","get","headers","Authorization","data","error","apply","arguments","styles","create","container","flex","backgroundColor","loading","justifyContent","alignItems","scrollContent","flexGrow","paddingBottom","profileInfo","flexDirection","padding","borderRadius","marginBottom","width","profilePic","height","marginRight","profileDetails","name","fontFamily","fontSize","fontWeight","city","articlesGrid","flexWrap","articleCard","aspectRatio","margin","style","children","size","color","contentContainerStyle","profileImage","source","uri","require","email","length","map","article","index","title","trade","details"],"sources":["/Users/matveitabelev/Desktop/TROQUANTE/MonProjet/components/ProfileScreen.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { View, Text, Image, StyleSheet, ScrollView, ActivityIndicator } from 'react-native';\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { globalStyles } from '../Style/globalFont';\n\nexport function ProfileScreen({ route, navigation }) {\n  const [profile, setProfile] = useState(null);\n  const [articles, setArticles] = useState([]);\n  const [trades, setTrades] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchProfileData = async () => {\n      try {\n        const token = await AsyncStorage.getItem('userToken');\n        if (token) {\n          console.log('Token found:', token); // Log pour vérifier le token\n          const response = await axios.get('http://localhost:5001/api/users/profile', {\n            headers: { Authorization: `Bearer ${token}` },\n          });\n          console.log('Profile data:', response.data); // Log pour vérifier les données du profil\n          setProfile(response.data);\n\n          // Ajoutez les appels pour récupérer les articles et les trades ici si nécessaire\n        } else {\n          console.log('No token found');\n        }\n      } catch (error) {\n        console.error('Erreur lors de la récupération des données :', error);\n        // Gérer l'erreur ici\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchProfileData();\n  }, []);\n\n  const styles = StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: '#A0AE88',\n    },\n    loading: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n    },\n    scrollContent: {\n      flexGrow: 1,\n      alignItems: 'center',\n      paddingBottom: 80,\n    },\n    profileInfo: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundColor: '#fff',\n      padding: 20,\n      borderRadius: 10,\n      marginBottom: 20,\n      width: '90%',\n    },\n    profilePic: {\n      width: 80,\n      height: 80,\n      borderRadius: 40,\n      marginRight: 20,\n    },\n    profileDetails: {\n      flex: 1,\n    },\n    name: {\n      fontFamily: 'Rowdies',\n      fontSize: 18,\n      fontWeight: 'bold',\n    },\n    city: {\n      fontFamily: 'Rowdies',\n      fontSize: 16,\n    },\n    articlesGrid: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      justifyContent: 'space-between',\n      width: '90%',\n    },\n    articleCard: {\n      backgroundColor: '#C9AC96',\n      width: '31%',\n      aspectRatio: 1,\n      margin: 5,\n      borderRadius: 10,\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n  });\n\n  if (isLoading) {\n    return (\n      <View style={styles.loading}>\n        <ActivityIndicator size=\"large\" color=\"#6E745C\" />\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <ScrollView contentContainerStyle={styles.scrollContent}>\n        {profile ? (\n          <View style={styles.profileInfo}>\n            {profile.profileImage ? (\n              <Image source={{ uri: profile.profileImage }} style={styles.profilePic} />\n            ) : (\n              <Image source={require('../assets/profile-pic.jpg')} style={styles.profilePic} />\n            )}\n            <View style={styles.profileDetails}>\n              <Text style={styles.name}>{profile.name}</Text>\n              <Text style={styles.city}>{profile.city}</Text>\n              <Text style={styles.email}>{profile.email}</Text>\n            </View>\n          </View>\n        ) : (\n          <Text>Profil non disponible</Text>\n        )}\n\n        {articles.length > 0 ? (\n          <View style={styles.articlesGrid}>\n            {articles.map((article, index) => (\n              <View key={index} style={styles.articleCard}>\n                <Text>{article.title}</Text>\n              </View>\n            ))}\n          </View>\n        ) : (\n          <Text>Aucun article disponible</Text>\n        )}\n\n        {trades.length > 0 ? (\n          <View>\n            <Text>Trocs passés:</Text>\n            {trades.map((trade, index) => (\n              <View key={index}>\n                <Text>{trade.details}</Text>\n              </View>\n            ))}\n          </View>\n        ) : (\n          <Text>Aucun troc passé disponible</Text>\n        )}\n      </ScrollView>\n    </View>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}