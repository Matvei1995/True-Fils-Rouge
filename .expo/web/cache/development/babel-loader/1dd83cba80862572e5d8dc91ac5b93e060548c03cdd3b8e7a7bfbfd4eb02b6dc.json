{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { globalStyles } from \"../Style/globalFont\";\nimport { Ionicons } from '@expo/vector-icons';\nimport { EditProfilePicture } from \"./EditProfilePicture\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function ProfileScreen(_ref) {\n  var route = _ref.route,\n    navigation = _ref.navigation;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    profile = _useState2[0],\n    setProfile = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    articles = _useState4[0],\n    setArticles = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    trades = _useState6[0],\n    setTrades = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    isEditing = _useState8[0],\n    setIsEditing = _useState8[1];\n  var _useState9 = useState(true),\n    _useState10 = _slicedToArray(_useState9, 2),\n    isLoading = _useState10[0],\n    setIsLoading = _useState10[1];\n  useEffect(function () {\n    var fetchProfileData = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          var token = yield AsyncStorage.getItem('userToken');\n          if (token) {\n            var response = yield axios.get('http://localhost:5001/api/users/profile', {\n              headers: {\n                Authorization: `Bearer ${token}`\n              }\n            });\n            setProfile(response.data);\n          }\n        } catch (error) {\n          console.error('Erreur lors de la récupération des données :', error);\n        } finally {\n          setIsLoading(false);\n        }\n      });\n      return function fetchProfileData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    fetchProfileData();\n  }, []);\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsx(ScrollView, {\n      contentContainerStyle: styles.scrollContent,\n      children: isLoading ? _jsx(ActivityIndicator, {\n        size: \"large\",\n        color: \"#6E745C\"\n      }) : _jsxs(View, {\n        style: styles.profileInfo,\n        children: [profile.profileImage ? _jsx(Image, {\n          source: {\n            uri: profile.profileImage\n          },\n          style: styles.profilePic\n        }) : _jsx(Image, {\n          source: require(\"./assets/profile-pic.jpg\"),\n          style: styles.profilePic\n        }), _jsxs(View, {\n          style: styles.profileDetails,\n          children: [_jsx(Text, {\n            style: styles.name,\n            children: profile.name\n          }), _jsx(Text, {\n            style: styles.city,\n            children: profile.city\n          }), _jsx(Text, {\n            style: styles.email,\n            children: profile.email\n          })]\n        })]\n      })\n    })\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","View","Text","Image","Pressable","StyleSheet","ScrollView","TouchableOpacity","Alert","ActivityIndicator","axios","AsyncStorage","globalStyles","Ionicons","EditProfilePicture","jsx","_jsx","jsxs","_jsxs","ProfileScreen","_ref","route","navigation","_useState","_useState2","_slicedToArray","profile","setProfile","_useState3","_useState4","articles","setArticles","_useState5","_useState6","trades","setTrades","_useState7","_useState8","isEditing","setIsEditing","_useState9","_useState10","isLoading","setIsLoading","fetchProfileData","_ref2","_asyncToGenerator","token","getItem","response","get","headers","Authorization","data","error","console","apply","arguments","style","styles","container","children","contentContainerStyle","scrollContent","size","color","profileInfo","profileImage","source","uri","profilePic","require","profileDetails","name","city","email"],"sources":["/Users/matveitabelev/Desktop/TROQUANTE/MonProjet/components/ProfileScreen.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { View, Text, Image, Pressable, StyleSheet, ScrollView, TouchableOpacity, Alert, ActivityIndicator } from 'react-native'; // Import ActivityIndicator\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { globalStyles } from '../Style/globalFont';\nimport { Ionicons } from '@expo/vector-icons'; \nimport { EditProfilePicture } from './EditProfilePicture';\n\nexport function ProfileScreen({ route, navigation }) {\n  const [profile, setProfile] = useState(null);\n  const [articles, setArticles] = useState([]);\n  const [trades, setTrades] = useState([]);\n  const [isEditing, setIsEditing] = useState(false);\n  const [isLoading, setIsLoading] = useState(true); // Nouvel état pour le chargement\n\n  useEffect(() => {\n    const fetchProfileData = async () => {\n      try {\n        const token = await AsyncStorage.getItem('userToken');\n        if (token) {\n          const response = await axios.get('http://localhost:5001/api/users/profile', {\n            headers: { Authorization: `Bearer ${token}` },\n          });\n          setProfile(response.data);\n\n          // ... (récupération des articles et trocs, comme avant)\n        }\n      } catch (error) {\n        console.error('Erreur lors de la récupération des données :', error);\n        // Gérez l'erreur ici, par exemple en affichant un message à l'utilisateur\n      } finally {\n        setIsLoading(false); // Fin du chargement, que la requête réussisse ou échoue\n      }\n    };\n\n    fetchProfileData();\n  }, []);\n\n  // ... (vos fonctions handleEditProfile, handleDeleteProfile)\n\n  return (\n    <View style={styles.container}>\n      {/* Header */}\n      {/* ... */}\n\n      <ScrollView contentContainerStyle={styles.scrollContent}>\n        {/* Informations du profil */}\n        {isLoading ? ( // Affichage d'un indicateur de chargement\n          <ActivityIndicator size=\"large\" color=\"#6E745C\" /> \n        ) : (\n          <View style={styles.profileInfo}>\n            {profile.profileImage ? ( \n              <Image source={{ uri: profile.profileImage }} style={styles.profilePic} />\n            ) : (\n              <Image source={require('./assets/profile-pic.jpg')} style={styles.profilePic} />\n            )}\n            <View style={styles.profileDetails}>\n              <Text style={styles.name}>{profile.name}</Text>\n              <Text style={styles.city}>{profile.city}</Text>\n              <Text style={styles.email}>{profile.email}</Text>\n            </View>\n          </View>\n        )}\n\n        {/* ... (articles et trocs passés) */}\n      </ScrollView>\n\n      {/* Barre de navigation inférieure */}\n      {/* ... */}\n    </View>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}